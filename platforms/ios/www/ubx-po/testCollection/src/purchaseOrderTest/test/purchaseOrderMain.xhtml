<html xmlns:javascript="http://www.w3.org/2002/xforms#inline" xmlns:xsi="http://www.w3.org/2001/XMLSchema-Instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"/><meta name="AUTHOR" content="Erik A. Johnson"/><title>Purchase Order Application XForm</title><script src="../../src/ubiquity-loader.js" type="text/javascript">/**/</script><script src="format.js" type="text/javascript">/**/</script><link href="./style/mainStyle.css" rel="stylesheet"/><link href="./style/gen_default.css" rel="stylesheet"/></head><body class="yui-skin-sam"><xforms:model id="model">  
           <!-- Main inventory listing retreived from the eXist database  --><xforms:instance id="Orders" src="http://localhost:8080/exist/rest/db/testCollection/ordersList.xml"/><xforms:submission id="updateOrders" method="put" includenamespaceprefixes="" action="http://localhost:8080/exist/rest/db/testCollection/ordersList.xml"><xforms:message ev:event="xforms-submit-error" level="modal" if="event('error-type')!='validation-error'">Unable to submit. Please try again later.</xforms:message><xforms:message ev:event="xforms-submit-error" level="modal" if="event('error-type')='validation-error'">Some of the data on this form is invalid. Please correct errors and try again.</xforms:message></xforms:submission></xforms:model><xforms:model id="prototypeModel"><xforms:instance id="prototype" src="http://localhost:8080/exist/rest/db/testCollection/orderPrototype.xml"/></xforms:model><div id="mainContainer"><div id="headerContainer"/> <!-- header div--><div id="mainContentArea"><div id="leftNavigation"><ul><li><xforms:trigger appearance="xf:image"><img class="buttonImage" src="../pngIcons/Shopping Cart.png"/><xforms:label>Orders</xforms:label></xforms:trigger></li><li><xforms:trigger appearance="xf:image"><img class="buttonImage" src="../pngIcons/Door.png"/><xforms:label>Inventory</xforms:label><xforms:load ev:event="DOMActivate" resource="adminInventory.html"/></xforms:trigger></li><li><xforms:trigger appearance="xf:image"><img class="buttonImage" src="../pngIcons/logout.png"/><xforms:label>Logout</xforms:label></xforms:trigger></li></ul></div><div id="mainForm"><br/><h3>Current Orders</h3><hr class="rule"/><br/><br/><xforms:repeat instance="Orders" nodeset="/ordersList/order" id="ordersTable"><xforms:output><img class="buttonImage" src="../pngIcons/User.png"/><xforms:label ref="customer/customerName"/></xforms:output><hr/><xforms:repeat nodeset="productsList/product" id="productListings"><xforms:trigger appearance="xf:image"><img class="buttonImage" src="../pngIcons/Delete.png"/><xforms:label/><xforms:action ev:event="DOMActivate">
			       <!-- Delete the currently indexed item --><xforms:delete nodeset="../product" at="index('productListings')"/> 
			       <!-- Put the focus to the indexed item of the order table --><xforms:setfocus control="productListings"/></xforms:action></xforms:trigger><xforms:input ref="productName"><xforms:label>Name:</xforms:label></xforms:input><xforms:input ref="cost"><xforms:label>Cost:</xforms:label></xforms:input><xforms:input ref="quantity"><xforms:label>Quantitiy:</xforms:label></xforms:input></xforms:repeat><hr/><xforms:output ref="subTotal"><xforms:label>Subtotal:</xforms:label></xforms:output><xforms:output ref="tax"><xforms:label>Tax:</xforms:label></xforms:output><xforms:output ref="total"><xforms:label>Total:</xforms:label></xforms:output></xforms:repeat><xforms:submit submission="updateOrders" appearance="xf:image"><img class="buttonImage" src="../pngIcons/save2.png"/><xforms:label>Save</xforms:label></xforms:submit><xforms:trigger appearance="xf:image"><img class="buttonImage" src="../pngIcons/Add2.png"/><xforms:label>Add</xforms:label><xforms:action ev:event="DOMActivate">
        
           <!-- Insert a new item after the currently indexed item
                (the last focused item before this trigger was activated) --><xforms:insert context="/ordersList" nodeset="order" at="index('ordersTable')" position="after" origin="/ordersList/prototype/order"/>
        
           <!-- Send the focus to the new item in the order table --><xforms:setfocus control="ordersTable"/></xforms:action></xforms:trigger></div><!-- mainForm--></div><!-- main content area--><div id="footerContainer"/> <!-- footer div--></div> <!--Main container div--></body></html>