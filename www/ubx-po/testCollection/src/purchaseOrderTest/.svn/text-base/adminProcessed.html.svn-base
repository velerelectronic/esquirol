<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ev="http://www.w3.org/2001/xml-events" 
      xmlns:xforms="http://www.w3.org/2002/xforms" 
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-Instance"
	  xmlns:javascript="http://www.w3.org/2002/xforms#inline">
 <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" />
    <meta name="AUTHOR" content="Erik A. Johnson" />
    <title>Purchase Order Application XForm</title>    
    <script src="../../src/ubiquity-loader.js" type="text/javascript">/**/</script>

    <script src="../format.js" type="text/javascript">/**/</script>
	<link href="./style/mainStyle.css" rel="stylesheet"></link>
	<link href="./style/gen_default.css" rel="stylesheet"></link>
	
  </head>
  <body class="yui-skin-sam">
       <xforms:model id="model">  
           <!-- Main inventory listing retreived from the eXist database  -->
           <xforms:instance id='ordersHistory' src="http://localhost:8080/exist/rest/db/testCollection/ordersHistory.xml">
           </xforms:instance>
           	
       </xforms:model>
       <xforms:model id="prototypeModel">
         <xforms:instance id="prototype" src="http://localhost:8080/exist/rest/db/testCollection/orderPrototype.xml"></xforms:instance>
         
         </xforms:model>

<div id="mainContainer">

<div id="headerContainer">
  
 
 </div> <!-- header div-->
 
 <div id="mainContentArea">
	 <div id="leftNavigation">
	 <ul>
	 <li>
	 <xforms:trigger appearance="xf:image">
	 	<img class="buttonImage" src="../pngIcons/Shopping Cart.png" />
	 	<xforms:label>Orders</xforms:label>
	 	<xforms:load ev:event="DOMActivate" resource="adminOrders.html"/>
	 </xforms:trigger>
      </li>
      <li>
	 <xforms:trigger appearance="xf:image">
	 	<img class="buttonImage" src="../pngIcons/Check.png" />
	 	<xforms:label>Processed</xforms:label>
	 </xforms:trigger>
      </li>
      <li>
    
    <xforms:trigger appearance="xf:image">
    		<img class="buttonImage" src="../pngIcons/Door.png" />
        	<xforms:label>Inventory</xforms:label>
        	<xforms:load ev:event="DOMActivate" resource="adminInventory.html"/>
        </xforms:trigger>
      </li>
      <li>
    
    <xforms:trigger appearance="xf:image">
    	<img class="buttonImage" src="../pngIcons/logout.png" />
        <xforms:label>Logout</xforms:label>
        <xforms:load ev:event="DOMActivate" resource="purchaseOrderMain.html"/>
    </xforms:trigger>
    </li>
    </ul>
		
	</div>
 
 <div id="mainForm">
 <br/>
 <h3>Processed Orders</h3>
 <hr class="rule"/>
 <br/>
 <br/> 
 <xforms:repeat instance="ordersHistory" nodeset="/ordersHistory/orders/order" id="ordersTable">
 	<xforms:output>
 		<img class="buttonImage" src="../pngIcons/User.png" />
 		<xforms:label ref="customerInfo/customer/customerName">Erik Johnson</xforms:label>
 	</xforms:output>
 	<xforms:output ref="total" class="table_summary regular" value="javascript:currency(number())">
			<xforms:label>OrderTotal:</xforms:label>
	</xforms:output>
	<xforms:output ref="total" class="table_summary regular" >
			<xforms:label>Date Filled:</xforms:label>
	</xforms:output >
        </xforms:repeat>
	<hr/>
	<div class="totals">
		<xforms:group  ref="/ordersHistory/report">
		<xforms:output ref="subTotal" class="table_summary regular" value="javascript:currency(number())">
			<xforms:label>Subtotal:</xforms:label>
		</xforms:output >
		<xforms:output ref="tax" class="table_summary regular" value="javascript:currency(number())">
			<xforms:label>Tax:</xforms:label>
		</xforms:output>
		<xforms:output ref="total" class="table_summary regular" value="javascript:currency(number())">
			<xforms:label>Total:</xforms:label>
		</xforms:output>
		</xforms:group>
	</div>
	<xforms:submit submission="updateOrders" appearance="xf:image">
		<img class="buttonImage" src="../pngIcons/save2.png" />
        <xforms:label>Save</xforms:label>
    </xforms:submit>
     
  <xforms:trigger appearance="xf:image">
    	<img class="buttonImage" src="../pngIcons/Print2.png" />
        <xforms:label>Print Report</xforms:label>
        <xforms:action ev:event="DOMActivate">        
        </xforms:action> 
    </xforms:trigger>
    
     <xforms:submit submission="refreshOrdersCache" appearance="xf:image">
	<xforms:hint>Refresh the data from Database, you will lose any unsaved data.</xforms:hint>
		<img class="buttonImage" src="../pngIcons/Refresh.png" />
        <xforms:label>Refresh</xforms:label>
    </xforms:submit>
    
  
    </div><!-- mainForm-->
    
    
    </div><!-- main content area-->
<div id="footerContainer">
</div> <!-- footer div-->
   
</div> <!--Main container div-->
    

    
   </body>
</html>
